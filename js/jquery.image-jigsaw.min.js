!function(s){function a(e){w=Math.floor(s.fn.jigsaw.defaults.width/s.fn.jigsaw.defaults.x),h=Math.floor(s.fn.jigsaw.defaults.height/s.fn.jigsaw.defaults.y);var n=e.children(".jigsaw_panel_").children("div").length,d=[];if(s.fn.jigsaw.defaults.distinct)for(i=0;i<s.fn.jigsaw.defaults.x;i++)for(d[i]=[],j=0;j<s.fn.jigsaw.defaults.y;j++)d[i][j]=!1;for(i=0;i<n;i++){var g=Math.floor(1e3*Math.random())%s.fn.jigsaw.defaults.x,l=Math.floor(1e3*Math.random())%s.fn.jigsaw.defaults.y;if(s.fn.jigsaw.defaults.distinct&&d[g][l])for(x=0;x<s.fn.jigsaw.defaults.x;x++)for(y=0;y<s.fn.jigsaw.defaults.y;y++)if(!d[x][y]){g=x,l=y;break}d[g][l]=!0;var o="-"+g*w+"px -"+l*h+"px";e.children(".jigsaw_panel_").children("div:eq("+i+")").css("background-position",o)}t=2==Math.floor(5*Math.random()+0)?setTimeout(function(){f(e)},s.fn.jigsaw.defaults.freq):setTimeout(function(){a(e)},s.fn.jigsaw.defaults.freq)}function f(f){for(w=Math.floor(s.fn.jigsaw.defaults.width/s.fn.jigsaw.defaults.x),h=Math.floor(s.fn.jigsaw.defaults.height/s.fn.jigsaw.defaults.y),i=0;i<s.fn.jigsaw.defaults.x;i++)for(j=0;j<s.fn.jigsaw.defaults.y;j++)pos="block"+i+j,f.children(".jigsaw_panel_").children("div[pos='"+pos+"']").css("background-position","-"+j*w+"px -"+i*h+"px").css("width",w+"px").css("height",h+"px").css("background-image","url("+s.fn.jigsaw.defaults.image+")");t=setTimeout(function(){a(f)},s.fn.jigsaw.defaults.freq)}s.fn.jigsaw=function(t){var f=s.extend({},s.fn.jigsaw.defaults,t);for(s.fn.jigsaw.defaults=f,s.fn.jigsaw.defaults.image=this.children("img").attr("src"),this.append('<div class="jigsaw_panel_"></div>'),s.fn.jigsaw.defaults.width=this.children("img")[0].width,s.fn.jigsaw.defaults.height=this.children("img")[0].height,obj=this.children(".jigsaw_panel_"),obj.css("width",parseInt(s.fn.jigsaw.defaults.width)+parseInt(s.fn.jigsaw.defaults.x*s.fn.jigsaw.defaults.margin*2)+parseInt(s.fn.jigsaw.defaults.error)+"px").css("height",parseInt(s.fn.jigsaw.defaults.height)+parseInt(s.fn.jigsaw.defaults.y*s.fn.jigsaw.defaults.margin*2)+"px"),w=Math.floor(s.fn.jigsaw.defaults.width/s.fn.jigsaw.defaults.x),h=Math.floor(s.fn.jigsaw.defaults.height/s.fn.jigsaw.defaults.y),i=0;i<s.fn.jigsaw.defaults.x;i++)for(j=0;j<s.fn.jigsaw.defaults.y;j++)pos="block"+i+j,obj.append("<div pos='"+pos+"'></div>"),obj.children("div[pos='"+pos+"']").css("background-position","-"+j*w+"px -"+i*h+"px").css("width",w+"px").css("height",h+"px").css("background-image","url("+s.fn.jigsaw.defaults.image+")").css("display","inline-block").css("margin",s.fn.jigsaw.defaults.margin).css("background-repeat","no-repeat").css("transition","background-position .5s ease-out");this.children("img").hide(),obj.fadeIn(),a(this)},s.fn.jigsaw.defaults={width:0,height:0,x:4,y:4,margin:1,error:16,freq:2e3,distinct:!0,image:""}}(jQuery);